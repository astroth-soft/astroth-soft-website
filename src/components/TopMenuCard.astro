---
import { getImage } from "astro:assets";

export interface Props {
    title: string;
    subtitle: string;
    backgroundImage?: Promise<{ default: ImageMetadata; }>; // TODO(nukanoto): ちゃんと `getImage`, `<Image />` 型定義したほうがタグの型とかに合わせて再利用性が高まると思う
    href?: string;
}

const { title, subtitle, backgroundImage, href } = Astro.props;

const CardElement = href ? "a" : "div";

const optimizedBackground = backgroundImage
    ? await getImage({ src: backgroundImage, format: "webp" }) // TODO: vite-ignore 使わなくてもいいようにする（import.meta.glob）
    : null;
---

<CardElement
    class="relative w-full h-90 overflow-hidden cursor-pointer group no-underline"
    href={href}
>
    <!-- Background Image -->
    {
        optimizedBackground && (
            <div
                class="absolute inset-0 bg-cover bg-center bg-no-repeat group-hover:scale-110 transition-transform duration-500"
                style={`background-image: url(${optimizedBackground.src});`}
            />
        )
    }

    <!-- Dark Overlay for better text readability -->
    <div class="absolute inset-0 bg-gradient-to-br from-black/20 to-black/50">
    </div>

    <!-- Content -->
    <div
        class="relative z-10 flex flex-col justify-center items-center h-full p-8 text-center"
    >
        <h2
            class="text-4xl md:text-5xl font-bold text-white mb-2 font-outfit tracking-wider"
        >
            {title}
        </h2>
        <p class="text-lg md:text-xl text-white/90 font-medium font-ibm">
            {subtitle}
        </p>
    </div>
</CardElement>
